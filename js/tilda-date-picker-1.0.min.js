function t_datepicker_init(recId,inputId,zeroElId){var rec=document.querySelector("#rec"+recId);if(rec){var strSelectorId="",targetField,isAlredyRendered,hasRenderedClass;if(strSelectorId=zeroElId?"#rec"+recId+' [data-elem-id="'+zeroElId+'"] [data-input-lid="'+inputId+'"]':"#rec"+recId+' [data-input-lid="'+inputId+'"]',targetField=rec.querySelector(strSelectorId+" .t-input-block"))if(!targetField.querySelector(".t_datepicker__inner"))if(!targetField.classList.contains("js-datepicker-rendered")){var dateInput=targetField.querySelector(".t-datepicker"),options;if(dateInput)targetField.classList.add("js-datepicker-rendered"),dateInput.setAttribute("autocomplete",navigator.userAgent.search(/Chrome/)>0?"no":"off"),targetField.classList.contains("t-input-block_inited-date-picker")||(targetField.classList.add("t-input-block_inited-date-picker"),targetField.style.position="relative"),t_datepicker__addHandler(strSelectorId+" .t-datepicker",t_datepicker__createOptions(targetField,rec))}}}function t_datepicker__createOptions(targetField,rec){var browserLang=(window.lang||window.navigator.userLanguage||window.navigator.language).toUpperCase().slice(0,2),allrecords=document.getElementById("allrecords");if(allrecords){var projectLang=allrecords.getAttribute("data-tilda-project-lang");projectLang&&(browserLang=projectLang)}for(var months=[],month=0;month<12;month++){var date=new Date(Date.UTC(2006,month,1,0,0,0));months.push(date.toLocaleDateString(browserLang,{month:"long",timeZone:"UTC"}))}for(var weekDays=[],weekday=1;weekday<=7;weekday++){var date=new Date(Date.UTC(2006,0,weekday,0,0,0));weekDays.push(date.toLocaleDateString(browserLang,{weekday:"short",timeZone:"UTC"}).substring(0,2))}var disabledDaysAttribute=targetField.querySelector(".t-datepicker__wrapper input").getAttribute("data-tilda-dateunvailable"),disabledDaysArray=[],options;return disabledDaysAttribute&&(disabledDaysArray=disabledDaysAttribute.split(",")),{months:months,weekDays:weekDays,body:targetField,sundayBased:!1,pickerAttribute:"data-picker",datePickerClass:"t_datepicker__inner",selectedDayClass:"selected-day",header:'<div class="t_datepicker__header"><button class="t_datepicker__arrow t_datepicker__arrow_prev" type="button"></button><button class="t_datepicker__arrow t_datepicker__arrow_next" type="button"></button><div class="t_datepicker__label t_datepicker__label_month"><span>{{month}}</span><select class="t_datepicker__select t_datepicker__select_month" tabindex="-1">{{months}}</select></div><div class="t_datepicker__label t_datepicker__label_year"><span>{{year}}</span><select class="t_datepicker__select t_datepicker__select_year" tabindex="-1">{{years}}</select></div></div>',minDate:"1940-01-01",maxDate:"2040-12-31",nextButtonClass:"t_datepicker__arrow_next",prevButtonClass:"t_datepicker__arrow_prev",selectYearClass:"t_datepicker__select_year",selectMonthClass:"t_datepicker__select_month",isRendered:!1,rec:rec,datePickerEl:"",datePickerTable:"",nextButtonEl:"",prevButtonEl:"",currentMonth:"",currentYear:"",inputEl:"",disablePast:-1!==disabledDaysArray.indexOf("past"),disableFuture:-1!==disabledDaysArray.indexOf("future"),disableMonday:-1!==disabledDaysArray.indexOf("mo"),disableTuesday:-1!==disabledDaysArray.indexOf("tu"),disableWednesday:-1!==disabledDaysArray.indexOf("we"),disableThursday:-1!==disabledDaysArray.indexOf("th"),disableFriday:-1!==disabledDaysArray.indexOf("fr"),disableSaturday:-1!==disabledDaysArray.indexOf("sa"),disableSunday:-1!==disabledDaysArray.indexOf("su"),disableToday:-1!==disabledDaysArray.indexOf("today")}}function t_datepicker__renderCallback(options){var blocks;if(1===options.rec.querySelectorAll(".t-cover, .t396__artboard").length){var container=options.datePickerEl,inputGroup=options.body,inputStyles,inputHeight=inputGroup.getBoundingClientRect().height,inputTop=inputGroup.getBoundingClientRect().y-options.rec.getBoundingClientRect().y,recHeight=options.rec.getBoundingClientRect().height,datepickerHeight=container.getBoundingClientRect().height;container.style.top="100%",container.style.bottom="auto",recHeight<inputTop+datepickerHeight+inputHeight&&datepickerHeight<inputTop&&(container.style.top="auto",container.style.bottom="100%")}}function t_datepicker__addHandler(inputElement,options){var inputField=options.body.querySelector(inputElement),maxYear=options.maxDate.split("-")[0],minYear=options.minDate.split("-")[0],events="click mousedown".split(" "),twiceFlag=!1;events.forEach((function(event){inputField.addEventListener(event,(function(){twiceFlag?twiceFlag=!1:(t_datepicker__openDatepicker(options),twiceFlag=!0)}))})),document.addEventListener("click",(function(e){if(e.target!==inputField||options.isRendered&&"none"!==options.datePickerEl.style.display)!e.target||e.target.classList.contains(options.datePickerClass)||e.target.closest("."+options.datePickerClass)||e.target.classList.contains("t-datepicker")||t_datepicker__closeDatepicker(options);else{var allDatepickers=document.querySelectorAll(".t_datepicker__inner");0!==allDatepickers.length&&allDatepickers.forEach((function(datepickerEl){datepickerEl!==inputField&&(datepickerEl.style.display="none")}))}})),options.body.addEventListener("click",(function(e){var dayCellDateAttribute=e.target.getAttribute(options.pickerAttribute);if(dayCellDateAttribute){var dayCellYear=parseInt(dayCellDateAttribute.split("-")[0],10);if(dayCellYear<=maxYear&&dayCellYear>=minYear){var activeDay=options.datePickerTable.querySelector("td.selected-day");activeDay&&activeDay.classList.remove("selected-day"),e.target.classList.add("selected-day"),t_datepicker__renderValue(inputField,dayCellDateAttribute),t_datepicker__closeDatepicker(options)}}e.target&&e.target.classList.contains(options.nextButtonClass)&&(t_datepicker__goToNextMonth(options),t_datepicker__checkLimit(options)),e.target&&e.target.classList.contains(options.prevButtonClass)&&(t_datepicker__goToPrevMonth(options),t_datepicker__checkLimit(options))})),inputField.addEventListener("focusout",(function(e){var divider=t_datepicker__getDateDivider(options.inputEl),inputValue=e.target.value,date;inputValue&&t_datepicker__validateWithRestrictions(inputValue.split(divider),options,inputField)})),inputField.addEventListener("keydown",(function(e){if(13===e.keyCode){var divider=t_datepicker__getDateDivider(options.inputEl),inputValue=e.target.value,date;if(!inputValue)return;t_datepicker__validateWithRestrictions(inputValue.split(divider),options,inputField)}}))}function t_datepicker__renderCalendar(options){var datepickerWrapper=document.createElement("div");datepickerWrapper.classList.add(options.datePickerClass);var date=t_datepicker__getCurrentDate().split("-");options.sundayBased||(options.weekDays.push(options.weekDays[0]),options.weekDays.splice(0,1));for(var yearsList=[],year=parseInt(options.minDate.slice(0,4),10);year<=parseInt(options.maxDate.slice(0,4),10);year++)yearsList.push(year);var markup=options.header.replace("{{year}}",date[0]).replace("{{years}}",t_datepicker__getOptionsHTML(yearsList,parseInt(date[0],10))).replace("{{month}}",options.months[parseInt(date[1],10)-1]).replace("{{months}}",t_datepicker__getOptionsHTML(options.months,options.months[parseInt(date[1],10)-1]));markup+='<table class="t_datepicker__body">',markup+=t_datepicker__renderMonth(date[0],parseInt(date[1],10)-1,options),markup+="</table>",datepickerWrapper.innerHTML=markup,options.body.insertAdjacentElement("beforeend",datepickerWrapper),options.datePickerEl=options.body.querySelector("."+options.datePickerClass),options.datePickerTable=options.body.querySelector(".t_datepicker__body"),options.nextButtonEl=options.datePickerEl.querySelector("."+options.nextButtonClass),options.prevButtonEl=options.datePickerEl.querySelector("."+options.prevButtonClass),options.currentMonth=options.body.querySelector(".t_datepicker__label_month span"),options.currentYear=options.body.querySelector(".t_datepicker__label_year span"),options.inputEl=options.body.querySelector(".t-datepicker");var yearSelect=options.body.querySelector(".t_datepicker__select_year"),monthSelect;t_datepicker__addSelectHandler(options.body.querySelector(".t_datepicker__select_month"),options,options.currentMonth),t_datepicker__addSelectHandler(yearSelect,options,options.currentYear)}function t_datepicker__goToNextMonth(options){var currentYear=options.currentYear.innerHTML,monthSelect=options.datePickerEl.querySelector("."+options.selectMonthClass),currentMonth=options.months.indexOf(options.currentMonth.innerHTML),nextMonth,nextYear;if(11===parseInt(currentMonth,10)){nextMonth=options.months[0];var yearSelect=options.datePickerEl.querySelector("."+options.selectYearClass);nextYear=parseInt(currentYear,10)+1,yearSelect.value=nextYear,options.currentYear.innerHTML=nextYear}else nextMonth=options.months[parseInt(currentMonth,10)+1],nextYear=currentYear;monthSelect.value=nextMonth,options.currentMonth.innerHTML=nextMonth,options.datePickerTable.innerHTML=t_datepicker__renderMonth(nextYear,options.months.indexOf(nextMonth),options)}function t_datepicker__goToPrevMonth(options){var currentYear=options.currentYear.innerHTML,monthSelect=options.datePickerEl.querySelector("."+options.selectMonthClass),currentMonth=options.months.indexOf(options.currentMonth.innerHTML),prevMonth,prevYear;if(0===parseInt(currentMonth,10)){prevMonth=options.months[11];var yearSelect=options.datePickerEl.querySelector("."+options.selectYearClass);prevYear=parseInt(currentYear,10)-1,yearSelect.value=prevYear,options.currentYear.innerHTML=prevYear}else prevMonth=options.months[parseInt(currentMonth,10)-1],prevYear=currentYear;monthSelect.value=prevMonth,options.currentMonth.innerHTML=prevMonth,options.datePickerTable.innerHTML=t_datepicker__renderMonth(prevYear,options.months.indexOf(prevMonth),options)}function t_datepicker__renderMonth(year,month,options,choosedDay){var days=t_datepicker__generateDays(year,month),choosedDate;choosedDate=choosedDay?new Date(year,month,choosedDay):t_datepicker__getSelectedDate(options);for(var markup="<thead><tr>",day=0;day<options.weekDays.length;day++){var weekDay;markup+='<th class="t_datepicker__week-day'+(day>4?" t_datepicker__week-end":"")+'">'+options.weekDays[day]+"</th>"}var today=t_datepicker__getCurrentDate().split("-");markup+="</tr></thead><tbody>";for(var dayOfWeekCounter=0,day=0;day<days.length;day++){var isPastDate,isFutureDate;markup+=1===days[day].getDay()?"<tr>":"",markup+='<td class="t_datepicker__day-cell ',days[day].getMonth()===month?markup+="t_datepicker__current-month":days[day].getMonth()<month?markup+="t_datepicker__previous-month":days[day].getMonth()>month&&(markup+="t_datepicker__next-month"),days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1===parseInt(today[1],10)&&days[day].getDate()===parseInt(today[2],10)&&(markup+=" t_datepicker__today"),days[day].getFullYear()===choosedDate.getFullYear()&&days[day].getMonth()===choosedDate.getMonth()&&days[day].getDate()===choosedDate.getDate()&&(markup+=" t_datepicker__selected-day"),dayOfWeekCounter+=1,(options.disableMonday&&dayOfWeekCounter+!options.sundayBased===2||options.disableTuesday&&dayOfWeekCounter+!options.sundayBased===3||options.disableWednesday&&dayOfWeekCounter+!options.sundayBased===4||options.disableThursday&&dayOfWeekCounter+!options.sundayBased===5||options.disableFriday&&dayOfWeekCounter+!options.sundayBased===6||options.disableSaturday&&dayOfWeekCounter+!options.sundayBased===7||options.disableSunday&&(dayOfWeekCounter+!options.sundayBased)%7==1||options.disableToday&&days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1===parseInt(today[1],10)&&days[day].getDate()===parseInt(today[2],10))&&(markup+=" t_datepicker__day-cell--disabled"),7===dayOfWeekCounter&&(dayOfWeekCounter=0),(days[day].getFullYear()<parseInt(today[0],10)||days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1<parseInt(today[1],10)||days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1===parseInt(today[1],10)&&days[day].getDate()<parseInt(today[2],10))&&(markup+=" t_datepicker__past",options.disablePast&&(markup+=" t_datepicker__day-cell--disabled")),(days[day].getFullYear()>parseInt(today[0],10)||days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1>parseInt(today[1],10)||days[day].getFullYear()===parseInt(today[0],10)&&days[day].getMonth()+1===parseInt(today[1],10)&&days[day].getDate()>parseInt(today[2],10))&&(markup+=" t_datepicker__future",options.disableFuture&&(markup+=" t_datepicker__day-cell--disabled")),markup+='"',markup+=options.pickerAttribute+'="',markup+=days[day].getFullYear()+"-",markup+=days[day].getMonth()+1+"-",markup+=days[day].getDate()+'"',markup+=">",markup+=days[day].getDate(),markup+=0===days[day].getDay()?"</tr>":""}return markup+="</tbody>"}function t_datepicker__getSelectedDate(options){if(!options.inputEl||!options.inputEl.value)return new Date;var divider=t_datepicker__getDateDivider(options.inputEl),selectedDate=options.inputEl.value.split(divider),format=options.inputEl.getAttribute("data-tilda-dateformat"),dateObj;return"DD-MM-YYYY"===format?dateObj=new Date(selectedDate[2],selectedDate[1]-1,selectedDate[0]):"MM-DD-YYYY"===format?dateObj=new Date(selectedDate[2],selectedDate[0]-1,selectedDate[1]):"YYYY-MM-DD"===format&&(dateObj=new Date(selectedDate[0],selectedDate[1]-1,selectedDate[2])),dateObj}function t_datepicker__generateDays(year,month){var date=new Date(year,month,1),days=[],firstDayOfMonth=date.getDay()-1==-1?6:date.getDay()-1;date.setDate(date.getDate()-firstDayOfMonth);for(var day=0;day<firstDayOfMonth;day++)days.push(new Date(date)),date.setDate(date.getDate()+1);for(;date.getMonth()===month;)days.push(new Date(date)),date.setDate(date.getDate()+1);if(1!==date.getDay())for(;1!==date.getDay()&&(days.push(new Date(date)),date.setDate(date.getDate()+1),!isNaN(date.getDay())););return days}function t_datepicker__openDatepicker(options){if(!options.isRendered){t_datepicker__renderCalendar(options);var divider=t_datepicker__getDateDivider(options.inputEl),choosedDate;if(!isNaN(+options.inputEl.value.replaceAll(divider,"")))t_datepicker__validateEnteredValue(choosedDate=t_datepicker__readValue(options.inputEl),options);return options.isRendered=!0,options.datePickerEl.style.display="block",void t_datepicker__renderCallback(options)}var divider=t_datepicker__getDateDivider(options.inputEl),choosedDate;isNaN(+options.inputEl.value.replaceAll(divider,""))||t_datepicker__validateEnteredValue(choosedDate=t_datepicker__readValue(options.inputEl),options);options.datePickerEl.style.display="block",t_datepicker__renderCallback(options)}function t_datepicker__closeDatepicker(options){options.datePickerEl&&(options.datePickerEl.style.display="none",t_datepicker__renderCallback(options))}function t_datepicker__renderValue(inputElement,value){for(var pickedDate=value.split("-"),date=0;date<3;date++)pickedDate[date].length<2&&(pickedDate[date]="0"+pickedDate[date]);var dateFormat=inputElement.getAttribute("data-tilda-dateformat"),dateDivider=t_datepicker__getDateDivider(inputElement);"DD-MM-YYYY"===dateFormat&&(inputElement.value=pickedDate[2]+dateDivider+pickedDate[1]+dateDivider+pickedDate[0]),"MM-DD-YYYY"===dateFormat&&(inputElement.value=pickedDate[1]+dateDivider+pickedDate[2]+dateDivider+pickedDate[0]),"YYYY-MM-DD"===dateFormat&&(inputElement.value=pickedDate[0]+dateDivider+pickedDate[1]+dateDivider+pickedDate[2]),inputElement.classList.contains("t-input_pvis")&&inputElement.classList.add("t-input_has-content"),inputElement.dispatchEvent(new Event("change"))}function t_datepicker__readValue(inputElement){var dateDivider=t_datepicker__getDateDivider(inputElement),currentDate=inputElement.value.split(dateDivider),dateFormat=inputElement.getAttribute("data-tilda-dateformat");return""==currentDate?t_datepicker__getCurrentDate():"DD-MM-YYYY"===dateFormat?currentDate[2]+"-"+currentDate[1]+"-"+currentDate[0]:"MM-DD-YYYY"===dateFormat?currentDate[2]+"-"+currentDate[0]+"-"+currentDate[1]:"YYYY-MM-DD"===dateFormat?currentDate[0]+"-"+currentDate[1]+"-"+currentDate[2]:void 0}function t_datepicker__getCurrentDate(){var now=new Date;return now.getFullYear()+"-"+(now.getMonth()+1)+"-"+now.getDate()}function t_datepicker__getOptionsHTML(array,choosed){for(var optionsList=[],i=0;i<array.length;i++)optionsList.push('<option value="'+array[i]+'"'+(array[i]===choosed?"selected":"")+">"+array[i]+"</option>");return optionsList.join("")}function t_datepicker__getDateDivider(inputElement){if(inputElement){var dateDividerType=inputElement.getAttribute("data-tilda-datediv");return"dash"!==dateDividerType&&dateDividerType?"slash"===dateDividerType?"/":"dot"===dateDividerType?".":void 0:"-"}}function t_datepicker__checkLimit(options){var maxDate=options.maxDate.split("-"),minDate=options.minDate.split("-"),selectedYear=parseInt(options.currentYear.innerHTML,10),selectedMonth=options.currentMonth.innerHTML;11===options.months.indexOf(selectedMonth)&&selectedYear===parseInt(maxDate[0],10)?(options.nextButtonEl.disabled=!0,options.prevButtonEl.disabled=!1):0===options.months.indexOf(selectedMonth)&&selectedYear===parseInt(minDate[0],10)?(options.prevButtonEl.disabled=!0,options.nextButtonEl.disabled=!1):(options.nextButtonEl.disabled=!1,options.prevButtonEl.disabled=!1)}function t_datepicker__addSelectHandler(select,options,label){select.addEventListener("input",(function(e){label.innerHTML=e.target.value;var currentYear=options.currentYear.innerHTML,currentMonth=options.months.indexOf(options.currentMonth.innerHTML);options.datePickerTable.innerHTML=t_datepicker__renderMonth(currentYear,currentMonth,options),t_datepicker__checkLimit(options)}))}function t_datepicker__validateEnteredValue(date,options){var choosedDate=date.split("-"),choosedYear=parseInt(choosedDate[0],10),choosedMonth=parseInt(choosedDate[1])-1,choosedDay=parseInt(choosedDate[2]),maxYear=parseInt(options.maxDate.split("-")[0],10),minYear=parseInt(options.minDate.split("-")[0],10),dayIsValid=choosedDay>=0&&choosedDay<=31,monthIsValid=choosedMonth>=0&&choosedMonth<=11,monthSelect=options.datePickerEl.querySelector("."+options.selectMonthClass),yearSelect=options.datePickerEl.querySelector("."+options.selectYearClass);choosedYear>maxYear?(options.datePickerTable.innerHTML=t_datepicker__renderMonth(maxYear,monthIsValid?choosedMonth:11,options,dayIsValid?choosedDay:void 0),monthSelect.value=options.months[monthIsValid?choosedMonth:11],options.currentMonth.innerHTML=options.months[monthIsValid?choosedMonth:11],yearSelect.value=maxYear,options.currentYear.innerHTML=maxYear):choosedYear<minYear?(options.datePickerTable.innerHTML=t_datepicker__renderMonth(minYear,monthIsValid?choosedMonth:0,options,dayIsValid?choosedDay:void 0),monthSelect.value=options.months[monthIsValid?choosedMonth:0],options.currentMonth.innerHTML=options.months[monthIsValid?choosedMonth:0],yearSelect.value=minYear,options.currentYear.innerHTML=minYear):(options.datePickerTable.innerHTML=t_datepicker__renderMonth(choosedYear,monthIsValid?choosedMonth:11,options,dayIsValid?choosedDay:void 0),monthSelect.value=options.months[monthIsValid?choosedMonth:0],options.currentMonth.innerHTML=options.months[monthIsValid?choosedMonth:0],yearSelect.value=choosedYear,options.currentYear.innerHTML=choosedYear),t_datepicker__checkLimit(options)}function t_datepicker__validateWithRestrictions(date,options,inputField){var dateObj=new Date(date[2],date[1]-1,date[0]),dayOfWeek=dateObj.getDay(),nowDateObj=new Date;dateObj.getTime()>nowDateObj.getTime()&&options.disableFuture||dateObj.getTime()<nowDateObj.getTime()&&options.disablePast?inputField.value="":(0===dayOfWeek&&options.disableSunday||1===dayOfWeek&&options.disableMonday||2===dayOfWeek&&options.disableTuesday||3===dayOfWeek&&options.disableWednesday||4===dayOfWeek&&options.disableThursday||5===dayOfWeek&&options.disableFriday||6===dayOfWeek&&options.disableSaturday||dateObj.getFullYear()===nowDateObj.getFullYear()&&dateObj.getMonth()===nowDateObj.getMonth()&&dateObj.getDate()===nowDateObj.getDate()&&options.disableToday)&&(inputField.value="")}